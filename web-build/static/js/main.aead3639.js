(()=>{"use strict";var e={1170:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_});var n=r(5004),i=r(5222),a=r(6220),o=r(3693),l=r(5861),s=r(885),d=r(1667),u=r(9385),c=r(6792),f=r(3287),p=r(2113),h=r(2826),m=r(6640),g=r(2536),b=r(5435),y=r(676),v=r(3779),j=r(7739),x=r(2629),w=c.default.create({container:{flex:1,backgroundColor:"#f5f5f5",alignItems:"center",justifyContent:"center",padding:20},card:{width:"100%",maxWidth:500,padding:16,elevation:4,borderRadius:8},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center",color:"#6200ee"},input:{marginBottom:10,backgroundColor:"white"},descriptionInput:{height:100},errorMessage:{marginBottom:15},image:{width:200,height:200,resizeMode:"contain",alignSelf:"center",marginVertical:10}});const S=function(e){e.navigation;var t=(0,n.useState)(null),r=(0,s.default)(t,2),i=r[0],a=r[1],c=b.object().shape({name:b.string().required("Name is required"),email:b.string().email("Invalid email").required("Email is required"),description:b.string().required("Description is required")}),S=function(){var e=(0,l.default)((function*(){var e=yield p.launchImageLibraryAsync({mediaTypes:h.MediaTypeOptions.Images,allowsEditing:!0,aspect:[4,3],quality:1});if(e.canceled)console.log("User cancelled image picker");else{var t=e.assets&&e.assets[0].uri;t&&a({uri:t})}}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,l.default)((function*(e){var t=new FormData;if(t.append("name",e.name),t.append("email",e.email),t.append("description",e.description),i)try{var r=yield fetch(i.uri),n=yield r.blob();t.append("photo",n)}catch(o){console.error("Error while fetching the image:",o)}console.log("FormData:",Array.from(t));try{var a=yield d.default.post("http://localhost:5000/api/tickets",t,{headers:{"Content-Type":"multipart/form-data"}});console.log(a.data)}catch(o){console.error("Error submitting form:",o)}}));return function(t){return e.apply(this,arguments)}}();return(0,x.jsx)(u.default,{style:w.container,children:(0,x.jsx)(y.default,{style:w.card,children:(0,x.jsxs)(y.default.Content,{children:[(0,x.jsx)(v.default,{style:w.title,children:"Help Desk"}),(0,x.jsx)(g.Formik,{initialValues:{name:"",email:"",description:""},validationSchema:c,onSubmit:k,children:function(e){var t=e.handleChange,r=e.handleBlur,n=e.handleSubmit,a=e.values,l=e.errors,s=e.touched;return(0,x.jsxs)(u.default,{children:[(0,x.jsx)(j.default,{label:"Name",style:w.input,onChangeText:t("name"),onBlur:r("name"),value:a.name,error:s.name&&l.name}),(0,x.jsx)(m.default,{style:w.errorMessage,type:"error",visible:s.name&&l.name,children:l.name}),(0,x.jsx)(j.default,{label:"Email",style:w.input,onChangeText:t("email"),onBlur:r("email"),value:a.email,error:s.email&&l.email}),(0,x.jsx)(m.default,{style:w.errorMessage,type:"error",visible:s.email&&l.email,children:l.email}),(0,x.jsx)(o.default,{title:"Select Photo",onPress:S,style:w.button}),i&&(0,x.jsx)(f.default,{source:i,style:w.image}),(0,x.jsx)(j.default,{label:"Description",onChangeText:t("description"),onBlur:r("description"),value:a.description,style:[w.input,w.descriptionInput],error:s.description&&l.description,multiline:!0,numberOfLines:4}),(0,x.jsx)(m.default,{style:w.errorMessage,type:"error",visible:s.description&&l.description,children:l.description}),(0,x.jsx)(o.default,{style:w.button,onPress:n,title:"Submit"})]})}})]})})})};var k=r(1318),O=r(1054),T=r(3645),C=r(5288),P=c.default.create({container:{flex:1,padding:10},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center",color:"#6200ee"},ticketItem:{backgroundColor:"#fff",padding:20,marginVertical:8,marginHorizontal:16,borderRadius:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.23,shadowRadius:2.62,elevation:4,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},ticketText:{fontSize:16},ticketStatus:{fontWeight:"bold"}});const R=function(e){var t=e.navigation,r=(0,n.useState)([]),i=(0,s.default)(r,2),a=i[0],o=i[1],c=function(){var e=(0,l.default)((function*(){try{var e=yield d.default.get("http://192.168.0.70:5000/api/tickets");o(e.data)}catch(t){console.error("Error fetching tickets:",t)}}));return function(){return e.apply(this,arguments)}}();return(0,k.useFocusEffect)((0,n.useCallback)((function(){c()}),[])),(0,x.jsxs)(u.default,{style:P.container,children:[(0,x.jsx)(O.default,{style:P.title,children:"Admin Panel"}),(0,x.jsx)(T.default,{data:a,keyExtractor:function(e){return e._id},renderItem:function(e){var r=e.item;return(0,x.jsxs)(C.default,{style:P.ticketItem,onPress:function(){t.navigate("TicketDetail",{ticket:r})},children:[(0,x.jsx)(O.default,{style:P.ticketText,children:r.name}),(0,x.jsxs)(O.default,{style:P.ticketStatus,children:["Status: ",r.status]})]})}})]})};var D=r(4942),z=r(6591),B=r(9294),E=r(4550),I=r(9394);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,D.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=c.default.create({container:{flex:1,padding:20},title:{fontSize:24,fontWeight:"bold",marginBottom:20},email:{fontSize:16,fontWeight:"bold",marginBottom:20},info:{fontSize:16,marginBottom:20},label:{fontSize:16,fontWeight:"bold",marginTop:20},previousResponse:{padding:10,marginTop:10,marginBottom:20,borderRadius:5},input:{backgroundColor:"white",borderWidth:1,borderColor:"gray",padding:10,marginTop:10,marginBottom:20,borderRadius:5,height:200},modalView:{margin:20,backgroundColor:"white",borderRadius:20,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},modalText:{marginBottom:15,textAlign:"center",fontWeight:"bold",fontSize:18}}),q=c.default.create({inputIOS:{backgroundColor:"white",fontSize:16,paddingVertical:12,paddingHorizontal:10,borderWidth:1,borderColor:"gray",borderRadius:4,color:"black",paddingRight:30,marginTop:10},inputAndroid:{backgroundColor:"white",fontSize:16,paddingHorizontal:10,paddingVertical:8,borderWidth:.5,borderColor:"purple",borderRadius:8,color:"black",paddingRight:30,marginTop:10}});const V=function(e){var t=e.route.params.ticket,r=(0,n.useState)(t.status),i=(0,s.default)(r,2),a=i[0],d=i[1],c=(0,n.useState)(""),f=(0,s.default)(c,2),p=f[0],h=f[1],m=(0,n.useState)(t.response||""),g=(0,s.default)(m,2),b=g[0],y=g[1],v=(0,n.useState)(!1),j=(0,s.default)(v,2),w=j[0],S=j[1],k=(0,n.useState)(!1),T=(0,s.default)(k,2),C=T[0],P=T[1],R=(0,n.useRef)(),D=function(){var e=(0,l.default)((function*(){var e=W(W({},t),{},{status:a,response:p});try{if(!(yield fetch(`http://192.168.0.70:5000/api/tickets/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Network response was not ok");S(!0),y(p),P(!0),setTimeout((function(){return P(!1)}),5e3)}catch(r){console.error("There was a problem with the submit operation:",r)}}));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(u.default,{style:A.container,children:[(0,x.jsx)(O.default,{style:A.title,children:t.name}),(0,x.jsx)(O.default,{style:A.email,children:t.email}),(0,x.jsx)(O.default,{style:A.info,children:t.description}),(0,x.jsx)(O.default,{style:A.label,children:"Status:"}),(0,x.jsx)(E.default,{onValueChange:function(e){return d(e)},items:[{label:"New",value:"new"},{label:"In Progress",value:"in progress"},{label:"Resolved",value:"resolved"}],style:q,value:a}),b&&(0,x.jsxs)(u.default,{children:[(0,x.jsx)(O.default,{style:A.label,children:"Previous response:"}),(0,x.jsx)(O.default,{style:A.previousResponse,children:b})]}),(0,x.jsx)(O.default,{style:A.label,children:"Response:"}),(0,x.jsx)(z.default,{style:A.input,onChangeText:h,value:p,multiline:!0,placeholder:"Type your response here"}),(0,x.jsx)(o.default,{title:"Submit",onPress:D}),(0,x.jsxs)(B.default,{animationType:"slide",transparent:!1,visible:w,onRequestClose:function(){S(!w)},children:[(0,x.jsxs)(u.default,{style:A.modalView,children:[(0,x.jsx)(O.default,{style:A.modalText,children:"Ticket Details:"}),(0,x.jsxs)(O.default,{children:["Name: ",t.name]}),(0,x.jsxs)(O.default,{children:["Email: ",t.email]}),(0,x.jsxs)(O.default,{children:["Description: ",t.description]}),(0,x.jsxs)(O.default,{children:["Status: ",a]}),(0,x.jsxs)(O.default,{children:["Response: ",b]}),(0,x.jsx)(o.default,{title:"Close",onPress:function(){return S(!1)}})]}),C&&(0,x.jsx)(I.default,{count:300,origin:{x:-10,y:0},ref:R})]})]})};var N=(0,a.default)();const _=function(){return(0,x.jsx)(i.default,{children:(0,x.jsxs)(N.Navigator,{children:[(0,x.jsx)(N.Screen,{name:"Main",component:S,options:function(e){var t=e.navigation;return{headerRight:function(){return(0,x.jsx)(o.default,{onPress:function(){return t.navigate("Admin")},title:"Dashboard",color:"#000"})}}}}),(0,x.jsx)(N.Screen,{name:"Admin",component:R,options:function(e){var t=e.navigation;return{headerLeft:function(){return(0,x.jsx)(o.default,{onPress:function(){return t.navigate("Main")},title:"Raise a Ticket",color:"#000"})}}}}),(0,x.jsx)(N.Screen,{name:"TicketDetail",component:V})]})})}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,(()=>{var e=[];r.O=(t,n,i,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,i,a]=e[u],l=!0,s=0;s<n.length;s++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(l=!1,a<o&&(o=a));if(l){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,i,a]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,[o,l,s]=n,d=0;if(o.some((t=>0!==e[t]))){for(i in l)r.o(l,i)&&(r.m[i]=l[i]);if(s)var u=s(r)}for(t&&t(n);d<o.length;d++)a=o[d],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[36],(()=>r(6271)));n=r.O(n)})();
//# sourceMappingURL=main.aead3639.js.map